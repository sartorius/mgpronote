$(document).on("turbolinks:load",function(){mainPartnLoaderInCaseOfChange()});function mainPartnLoaderInCaseOfChange(){if($("#mg-graph-identifier").text()=="pardash-gr"){runjsPartnerGrid()}else{if(($("#mg-graph-identifier").text()=="parprint12-gr")||($("#mg-graph-identifier").text()=="parprintnotrack-gr")){$("#btn-print-12").click(function(){generateCb12PDF()});display12Cb()}else{}}}function setCellSize(a){return a.substring(0,170)}function setCellSizeMedium(a){return a.substring(0,100)}function setSmallCellSize(a){return a.substring(0,50)}function pad(a,b){var c=a+"";while(c.length<b){c="0"+c}return c}function generateCb12PDF(){$("body").addClass("loading");console.log("Click on generateCb12PDF");var t=new jsPDF();var b=1;var l=new Date();var k="";var r="";var j="";var h="";var c=60;var g=25;var o=15;var n=20;var q=5;var p=30;var d=37;var f=40;var m=20;var e=5;for(i=0;i<dataTagToJsonArray.length;i++){var s=100*(i%2);if(dataTagToJsonArray[i].dest_email==null){k=setCellSize("Destinataire: non renseigné")}else{k=setCellSize("Destinataire: "+dataTagToJsonArray[i].dest_email)}if(dataTagToJsonArray[i].step==null){k=k+setCellSize(" - Étape: Err 4890")}else{k=k+setCellSize(" - Étape: "+dataTagToJsonArray[i].step)}k=k+" - Ce paquet ne vous appartient pas? Contactez contact@partenaire.com";var a=t.setFontSize(6).splitTextToSize(k+" - Imprimé le "+l.toLocaleString(),d);t.text(q+s+c+2,3+(f+1)*b,a);t.addImage(document.getElementById("mbc-"+i).src,"PNG",q+s,f*b,c,g);if(((i+1)%2)==0){b++}}t.save("MGSuivi_P12");$("body").removeClass("loading")}function display12Cb(){for(i=0;i<dataTagToJsonArray.length;i++){dataTagToJsonArray[i].ref_tag=mgsEncode(dataTagToJsonArray[i].id,dataTagToJsonArray[i].secure);$("#item-bc-"+i).html(dataTagToJsonArray[i].ref_tag);JsBarcode("#mbc-"+i,dataTagToJsonArray[i].ref_tag)}}function runjsPartnerGrid(){for(i=0;i<dataTagToJsonArray.length;i++){dataTagToJsonArray[i].ref_tag=mgsEncode(dataTagToJsonArray[i].id,dataTagToJsonArray[i].secure)}if(dataTagToJsonArray.length>0){$("#jsGrid").jsGrid({height:"auto",width:"100%",sorting:true,paging:true,data:dataTagToJsonArray,fields:[{name:"id",title:"#",type:"number",width:5,headercss:"h-jsG-r"},{name:"secure",title:"Secure",type:"number",width:25,headercss:"h-jsG-r"},{name:"ref_tag",title:"Référence",type:"text",align:"right",width:25,headercss:"h-jsG-r",itemTemplate:function(b,a){return'<i class="monosp-ft">'+b+"</i>"}},{name:"step",title:"Status",type:"text",headercss:"h-jsG-l"}]})}else{$("#jsGrid").hide()}};